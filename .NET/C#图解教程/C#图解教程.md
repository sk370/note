## 1. .NET框架

### 1.1 .NET组成

组成一：

1. 编程工具
2. CLR：Common Language Runtime，公共语言运行库——执行环境。
3. BCL：Base Class Library，基类库。

组成二：

1. CLR：Common Language Runtime，公共语言运行库——执行环境。
2. FCL：基类库，Framework Class Library。
    - FCL是BCL的超集。

### 1.2 源码执行过程

1. 源码→程序集1
    1. 程序集特点：可执行，或为dll。
    2. 程序集语言：CIL（Common Intermediate Languange），公共中间语言。
    3. 程序集内容：
        - CIL
        - 类型元数据
        - 对其他程序集引用的元数据。
2. CIL→本机代码

## 2. C#基本语法规则

### 2.1 标识符

1. 数字不能开头。
2. @只能放开头，但不建议使用。

### 2.2 关键字

关键字：

![Alt text](assets/image-1.png)

上下文关键字：

![Alt text](assets/image-2.png)

- 上下文关键字仅在特定的语言结构中充当关键字的标识符。
- 关键字不能被用作标识符，上下文关键字可以在代码的其他部分用作标识符。

### 2.3 Main方法

1. Main方法是所有C#程序的入口。
2. Main首字母大写。

### 2.4 空白

1. 空白指没有可视化输出。
2. 空白编译时忽略。
3. 空白增加可读性。
4. 分类：
    - 空格
    - 制表符
    - 换行符
    - 回车符

### 2.5 语句

1. 含义：描述一个类型或告诉程序执行某个动作的源代码指令。
2. 简单语句：以`;`结束。
3. 块：由一对`{}`包裹的0条或多条简单语句。
    - 在语法上相当于一条一句。
    - 块末尾的大括号不需要`;`

### 2.6 输出

BCL提供一个System命名空间的Console类，包含了输入和输出到控制台的方法。

#### 2.6.1 Write

1. 不换行输出。
2. 字符串使用双引号包裹。

#### 2.6.2 WriteLine

1. 换行输出。
2. 其他同Write

#### 2.6.3 格式字符串

Write和WriteLne输出多个参数时：

1. 语法：`Console.WriteLine("格式字符串{0}格式字符串{1}",替换值0,替换值1);`
2. 参数间使用逗号分隔。
3. 第一个参数必须是字符串，成为格式字符串。格式字符串包含替代标记。
    - 替代标记由一个整数及大括号组成，整数代表替换值的位置。
    - 替代标记的整数从0开始。
4. C#6.0引入字符串插值方法：

    ```c#
    int var1 = 3;
    int var2 = 6;
    Console.WriteLine($"Two Sample integers are {var1} and {var2}");
    ```

#### 2.6.4 多重标记和值

1. 替代标记位置和数量任意。
    - ![Alt text](assets/image-3.png)
2. 替代标记的整数值不能超过替换值的数量。
    - 不会产生编译错误。
    - 会产生运行时错误（异常）。
    - ![Alt text](assets/image-4.png)

#### 2.6.5 格式化数字字符串

1. 对齐：
    1. 格式字符串语法：`{index,alignment}`
    2. alignment正数表示右对齐，负数表示左对齐。
        - alignment小于字符串的长度，则对齐忽略
2. 格式化：
    1. 语法：`{index:format}`
        - `:`和format之间不能有空格。
    2. format：
        - ![Alt text](assets/image-5.png)
3. 对齐和格式化可以一起用，格式为：`{index,alignment:format}`

### 2.7 注释

![Alt text](assets/image-6.png)

## 3. 类型、存储和变量

1. C#程序是一组类型声明。
    1. C程序是一组函数和数据类型。
    2. C++程序是一组函数和类。
2. 类型是一种模板。组成：
    1. 名称
    2. 数据结构
    3. 一些行为和约束条件
3. 实例化类型：从某个类型模板创建的实际对象，成为实例化类型。
4. 数据成员和函数成员。
    1. 非简单类型可以包含不同类型的数据项，这些数据项个体称为成员。
    2. 数据成员：保存了与这个类的对象或整个类相关的数据。
    3. 函数成员：执行代码。dinginess类型行为。
5. 预定义类型：
    1. ![Alt text](assets/image-7.png)
    2. 共16种，包含11种数值类型，1种unicode字符类型，1种bool类型，3种非简单类型：
        - string，unicode字符数组
        - object，所有其他类型的基类
        - dynamic，使用动态语言编写的程序集使用。
    3. 预定义类型的类型名称均为小写字母
    4. C#的类型名称底层映射到.net的类型名称，二者语法互相符合，但不建议使用.net的语法代替C#语法。
    5. 预定义简单类型：
        - ![Alt text](assets/image-8.png)
    6. 预定义非简单类型：
        - ![Alt text](assets/image-9.png)
6. 用户自定义类型：
    1. 类类型：class
    2. 结构类型：struct
    3. 数组类型：array
    4. 枚举类型：enum
    5. 委托类型：delegate
    6. 接口类型：interface
7. 类型的分类：
    1. 值类型：数据存放在栈内存中，存储实际的数据。
    2. 引用类型：第一段数据，存放在堆内存中，存储实际的数据；第二段引用，存放指向数据在堆内存中的地址，在栈中。
        - 引用类型对象的成员：
            1. 数据部分始终存放在堆内存中。
            2. 值类型或引用类型的引用部分可能存放在堆中，也可能在栈中。
            3. ![Alt text](assets/image-10.png)
    3. ![Alt text](assets/image-11.png)
8. 变量：
    1. 分类：
        - ![Alt text](assets/image-12.png)
    2. 默认初始化：
        |变量类型|存储位置|自动初始化|用途|
        |--|--|--|--|
        |局部变量|栈或栈和堆|否|用于函数成员内部的局部计算|
        |类字段|堆|是|类的成员|
        |结构字段|栈或堆|是|结构的成员|
        |参数|栈|否|用于把值传入或传出|
        |数组元素|堆|是|数组的成员|
    3. 多变量声明：使用逗号分隔，类型必须一致，可以包含初始化语句。
        - 如：`double var1=2.5,var2;`
9. dynamic关键字：
    1. .net的一些程序集是动态语言编写的，而c#是静态语言，为了让C#能够使用这些程序集，并且在编译时解析类型，C#引入了dynamic关键字。
    2. dynamic类型的变量编译时不会进行类型检查，运行时会进行类型检查。
10. 可空类型：
    1. 作用：表示变量未存储有效值。
    2. 引用类型：将值赋为null，即可表示可空类型。
    3. 普通的值类型称为非可空类型。

## 4. 类的基本概念

### 4.1 类的概念

1. 定义：
    1. 类是程序的数据和功能被组织为逻辑上相关的数据项和函数的封装集合。
    2. 类是一个能存储数据并执行代码的数据结构。
2. 组成：
    1. 数据成员
    2. 函数成员
3. 成员的类型：
    1. ![Alt text](assets/image-13.png)

### 4.2 声明类、创建类

1. 声明类并不创建类的实例，只创建用于创建实例的模板。
2. 组成：
    1. 类名
    2. 类成员
    3. 类特征：如关键字class
3. 声明类：即定义一个类。
4. 创建类（为类类型的变量分配内存）：使用new关键字。

### 4.3 类成员

类成员有很多，最重要的为字段和方法，一个为数据成员，一个为函数成员。

按照另外一个分法：类成员可以分为：

- 实例成员：成员跟类的实例相关。
- 静态成员：与实例关系不大，主要是与类相关。

#### 4.3.1 字段

1. 字段是一种变量，只能声明在类内部。
2. 字段可以显式初始化，也可以隐式初始化。隐式初始化时，字段值会被编译器设置为默认值，默认值由字段类型决定。

#### 4.3.2 方法

1. 概念：具有名称的可执行代码块。
2. 组成：
    1. 方法头：
        1. 返回类型
        2. 名称
        3. 参数列表
    2. 方法体
        1. 局部变量
        2. 控制流结构
        3. 方法调用
        4. 内嵌的块
        5. 其他方法：成为局部函数

### 4.4 访问修饰符

1. 作用：指明程序的其他部分如何访问成员。
2. 分类：
    1. 私有的——private
        - 只能从声明它的类的内部访问，其他类看不见或不可访问。
        - 默认不写即为私有。
    2. 公有——public
    3. 受保护——proctected
    4. 内部——internal
    5. 受保护内部——protected internal

## 5. 方法

方法的特性适用于类、struct。

### 5.1 方法体成员

#### 5.1.1 局部变量

1. 字段通常保存和对象状态有关的数据。
2. 局部变量经常用于保存局部或临时的计算数据。
3. 关键字var：
    1. 只能用于局部变量，不能用于字段。
    2. 声明变量时必须同时初始化。
    3. 编译器推断出变量的类型，之后不能更改。
4. 局部变量的生命周期只作用于最小的块单元。
5. 局部常量：
    1. 声明：`const Type Identifier = value;`
    2. 声明时必须初始化。
    3. 声明后值不能改变。

![Alt text](assets/image-15.png)

#### 5.1.2 控制流

同流程控制。

#### 5.1.3 方法调用

在方法体内调用其他方法。

#### 5.1.4 内嵌的块

无特别情况。

#### 5.1.5 局部函数

C#7.0开始，可以在一个方法中声明另一个单独的方法。同时该方法只能在声明它的方法内部调用。

